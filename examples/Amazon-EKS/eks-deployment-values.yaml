# Default values for bitwarden.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

#
# General configuration options
#
general:
  # Core server version to install
  coreVersion: "1.41.3"
  # Web version to install
  webVersion: "2.20.2"
  # Labels to apply to all resources
  labels: {}
    # label1: value1
    # label2: value2
  # The name of the Config Map to store the Bitwarden configuration
  configMapName: config
  # Domain used for Bitwarden installation
  domain: "bitwarden.localhost"
  # This value can be generated at https://bitwarden.com/host/
  installationId: ""
  # This value can be generated at https://bitwarden.com/host/
  installationKey: ""
  yubico:
    # Used for YubiCloud Validation Service or Self-hosted Yubico Validation Server
    clientId: ""
    # Used for YubiCloud Validation Service or Self-hosted Yubico Validation Server
    key: ""
    # Primary URL for self-hosted Yubico Validation Server.  Not needed if using YubiCloud Validation Service.
    validationURLs: []
  email:
    # Email address used for invitations, typically no-reply@smtp-host
    replyToEmail: "no-reply@bitwarden.localhost"
    # Your SMTP server hostname (recommended) or IP address
    smtpHost: "smtp.gmail.com"
    # The SMTP port used by the SMTP server
    smtpPort: "587"
    # Whether your SMTP server uses an encryption protocol, "true" for SSL, "false" for TLS
    smtpSsl: "false"
    # A valid username for the SMTP host
    smtpUsername: "username"
    # A valid password for the SMTP host
    smtpPassword: "password"
  # Specify the number of hours after which an Organization Invite will expire (120 by default)
  organizationInviteExpirationHours: "120"
  # Specify "true" to disable new users signing up for an account on this instance via the Registration page.
  disableUserRegistration: "false"
  hibp:
    # Used for checking password leaks. Available here: https://haveibeenpwned.com/API/Key
    apiKey: ""
  # Email addresses which may access the System Administrator Portal, each entry should be separated by a comma
  admins: ""

#
#  Configure ingress
#
ingress:
  ## - If this is set to true, an Ingress resource will be created
  enabled: true
  ## - Name of the Ingress resource
  name: ingress
  ## Ingress Route Prefix
  routePrefix: /
  ## - Annotations to add to the Ingress resource
  annotations:
    traefik.ingress.kubernetes.io/router.entrypoints: websecure
    traefik.ingress.kubernetes.io/router.tls: "true"
  ## - Labels to add to the Ingress resource
  labels: {}
  ## - Class name to use for Ingress resource
  # className: public
  ## - Path Type for Ingress resource - Can be Exact, Prefix, or ImplementationSpecific
  pathType: Prefix
  # Certificate options
  cert:
    # CA Certificate information
    ca:
      enabled: false
      # Additional annotations to add to the CA certificate secret
      annotations: {}
      # Additional labels to add to the CA certificate secret
      labels: {}
      # CA certificate secret name
      name: cacert
      # CA certificate secret value (base64)
      value: ""
    # TLS Certificate information
    tls:
      enabled: true
      # Additional annotations to add to the TLS certificate secret
      annotations: {}
      # Additional labels to add to the TLS certificate secret
      labels: {}
      # TLS certificate secret name
      name: tls
      # TLS certificate secret value (base64)
      cert: ""
      # TLS certificate secret key (base64)
      key: ""

#
# Configure database
#
database:
  # If enabled, will deploy a MSSQL component including:
  # - Deployment
  # - Service
  # - Volumes
  #
  # If disabled, you will need to specify the following for the external database:
  # - hostname
  # - port
  # - user
  # - password
  enabled: false

  # Hostname of the external database
  hostname: database-hostname.domain.com
  # Port the external database is listening for connections on
  port: 1433
  # Admin user of the external database
  user: admin
  # Admin password of the external database
  password: password

  # The MSSQL deployment
  deployment:
    # Annotations to add to the MSSQL deployment
    annotations: {}
    # Labels to add to the MSSQL deployment
    labels: {}
    # Annotations to add to the MSSQL deployment pods
    podAnnotations: {}
    # Labels to add to the MSSQL deployment pods
    podLabels: {}
    # Image name, tag, and pull policy
    image:
      name: bitwarden/mssql
      # Tag of the image to use. (Defaults to general.coreVersion)
      # tag: ""
      pullPolicy: IfNotPresent
    # The containers are limited to the resources below
    resources:
      limits:
        memory: 2Gi

  # The MSSQL service
  service:
    # Annotations to add to the MSSQL service
    annotations: {}
    # Labels to add to the MSSQL service
    labels: {}
    # Type of the MSSQL service - Can be ExternalName, ClusterIP, NodePort, and LoadBalancer
    type: ClusterIP
    # The port exposed by the MSSQL service
    port: 1433
    # Port to access on the pods targeted by the service
    targetPort: 1433

  # The MSSQL volumes
  volume:
    backups:
      # If specified, existing claim will be used instead of creating a new PVC.
      # existingClaim: ""
      # Additional volume annotations
      annotations: {}
      # Additional volume labels
      labels: {}
      # Access mode
      accessMode: ReadWriteMany
      # Storage class
      # storageClass: ""
      # Storage size
      size: 10Gi
    data:
      # If specified, existing claim will be used instead of creating a new PVC.
      # existingClaim: ""
      # Additional volume annotations
      annotations: {}
      # Additional volume labels
      labels: {}
      # Access mode
      accessMode: ReadWriteMany
      # Storage class
      # storageClass: ""
      # Storage size
      size: 10Gi
    log:
      # If specified, existing claim will be used instead of creating a new PVC.
      # existingClaim: ""
      # Additional volume annotations
      annotations: {}
      # Additional volume labels
      labels: {}
      # Access mode
      accessMode: ReadWriteMany
      # Storage class
      # storageClass: ""
      # Storage size
      size: 10Gi

#
# Configure components
#
component:
  # The Admin component
  admin:
    # The Admin deployment
    deployment:
      enabled: true
      # Can be either Deployment or DaemonSet
      kind: Deployment
      # Number of pods of the deployment (only applies when kind == Deployment)
      replicas: 3
      # Additional deployment annotations
      annotations: {}
      # Additional deployment labels
      labels: {}
      # Additional pod annotations
      podAnnotations: {}
      # Additional pod labels
      podLabels: {}
      # Additional containers
      additionalContainers: []
      # Additional volumes available for use with initContainers and additionalContainers
      additionalVolumes: []
      # Additional initContainers
      initContainers: []
      # Image name, tag, and pull policy
      image:
        name: bitwarden/admin
        # Tag of the image to use. (Defaults to general.coreVersion)
        # tag: ""
        pullPolicy: IfNotPresent
    service:
      enabled: true
      # Additional service annotations
      annotations: {}
      # Additional service labels
      labels: {}
      # Service type (Can be ExternalName, ClusterIP, NodePort, or LoadBalancer)
      type: ClusterIP
      # Port exposed by this service
      port: 5000
      # Port to access on the pods targeted by the service
      targetPort: 5000

  # The API component
  api:
    # The API deployment
    deployment:
      enabled: true
      # Can be either Deployment or DaemonSet
      kind: Deployment
      # Number of pods of the deployment (only applies when kind == Deployment)
      replicas: 3
      # Additional deployment annotations
      annotations: {}
      # Additional deployment labels
      labels: {}
      # Additional pod annotations
      podAnnotations: {}
      # Additional pod labels
      podLabels: {}
      # Additional containers
      additionalContainers: []
      # Additional volumes available for use with initContainers and additionalContainers
      additionalVolumes: []
      # Additional initContainers
      initContainers: []
      # Image name, tag, and pull policy
      image:
        name: bitwarden/api
        # Tag of the image to use. (Defaults to general.coreVersion)
        # tag: ""
        pullPolicy: IfNotPresent
    service:
      enabled: true
      # Additional service annotations
      annotations: {}
      # Additional service labels
      labels: {}
      # Service type (Can be ExternalName, ClusterIP, NodePort, or LoadBalancer)
      type: ClusterIP
      # Port exposed by this service
      port: 5000
      # Port to access on the pods targeted by the service
      targetPort: 5000

  # The Attachments component
  attachments:
    # The Attachments deployment
    deployment:
      enabled: true
      # Can be either Deployment or DaemonSet
      kind: Deployment
      # Number of pods of the deployment (only applies when kind == Deployment)
      replicas: 3
      # Additional deployment annotations
      annotations: {}
      # Additional deployment labels
      labels: {}
      # Additional pod annotations
      podAnnotations: {}
      # Additional pod labels
      podLabels: {}
      # Additional containers
      additionalContainers: []
      # Additional volumes available for use with initContainers and additionalContainers
      additionalVolumes: []
      # Additional initContainers
      initContainers: []
      # Image name, tag, and pull policy
      image:
        name: bitwarden/attachments
        # Tag of the image to use. (Defaults to general.coreVersion)
        # tag: ""
        pullPolicy: IfNotPresent
    service:
      enabled: true
      # Additional service annotations
      annotations: {}
      # Additional service labels
      labels: {}
      # Service type (Can be ExternalName, ClusterIP, NodePort, or LoadBalancer)
      type: ClusterIP
      # Port exposed by this service
      port: 5000
      # Port to access on the pods targeted by the service
      targetPort: 5000
    volume:
      # If specified, existing claim will be used instead of creating a new PVC.
      # existingClaim: ""
      # Additional volume annotations
      annotations: {}
      # Additional volume labels
      labels: {}
      # Access mode
      accessMode: ReadWriteMany
      # Storage class
      storageClass: "efs-sc"
      # Storage size
      size: 1Gi

  # The Events component
  events:
    # The Events deployment
    deployment:
      enabled: true
      # Can be either Deployment or DaemonSet
      kind: Deployment
      # Number of pods of the deployment (only applies when kind == Deployment)
      replicas: 3
      # Additional deployment annotations
      annotations: {}
      # Additional deployment labels
      labels: {}
      # Additional pod annotations
      podAnnotations: {}
      # Additional pod labels
      podLabels: {}
      # Additional containers
      additionalContainers: []
      # Additional volumes available for use with initContainers and additionalContainers
      additionalVolumes: []
      # Additional initContainers
      initContainers: []
      # Image name, tag, and pull policy
      image:
        name: bitwarden/events
        # Tag of the image to use. (Defaults to general.coreVersion)
        # tag: ""
        pullPolicy: IfNotPresent
    service:
      enabled: true
      # Additional service annotations
      annotations: {}
      # Additional service labels
      labels: {}
      # Service type (Can be ExternalName, ClusterIP, NodePort, or LoadBalancer)
      type: ClusterIP
      # Port exposed by this service
      port: 5000
      # Port to access on the pods targeted by the service
      targetPort: 5000

  # The Icons component
  icons:
    # The Icons deployment
    deployment:
      enabled: true
      # Can be either Deployment or DaemonSet
      kind: Deployment
      # Number of pods of the deployment (only applies when kind == Deployment)
      replicas: 3
      # Additional deployment annotations
      annotations: {}
      # Additional deployment labels
      labels: {}
      # Additional pod annotations
      podAnnotations: {}
      # Additional pod labels
      podLabels: {}
      # Additional containers
      additionalContainers: []
      # Additional volumes available for use with initContainers and additionalContainers
      additionalVolumes: []
      # Additional initContainers
      initContainers: []
      # Image name, tag, and pull policy
      image:
        name: bitwarden/icons
        # Tag of the image to use. (Defaults to general.coreVersion)
        # tag: ""
        pullPolicy: IfNotPresent
    service:
      enabled: true
      # Additional service annotations
      annotations: {}
      # Additional service labels
      labels: {}
      # Service type (Can be ExternalName, ClusterIP, NodePort, or LoadBalancer)
      type: ClusterIP
      # Port exposed by this service
      port: 5000
      # Port to access on the pods targeted by the service
      targetPort: 5000

  # The Identity component
  identity:
    # The Identity deployment
    deployment:
      enabled: true
      # Can be either Deployment or DaemonSet
      kind: Deployment
      # Number of pods of the deployment (only applies when kind == Deployment)
      replicas: 3
      # Additional deployment annotations
      annotations: {}
      # Additional deployment labels
      labels: {}
      # Additional pod annotations
      podAnnotations: {}
      # Additional pod labels
      podLabels: {}
      # Additional containers
      additionalContainers: []
      # Additional volumes available for use with initContainers and additionalContainers
      additionalVolumes: []
      # Additional initContainers
      initContainers: []
      # Image name, tag, and pull policy
      image:
        name: bitwarden/identity
        # Tag of the image to use. (Defaults to general.coreVersion)
        # tag: ""
        pullPolicy: IfNotPresent
    service:
      enabled: true
      # Additional service annotations
      annotations: {}
      # Additional service labels
      labels: {}
      # Service type (Can be ExternalName, ClusterIP, NodePort, or LoadBalancer)
      type: ClusterIP
      # Port exposed by this service
      port: 5000
      # Port to access on the pods targeted by the service
      targetPort: 5000

  # The Notifications component
  notifications:
    # The Notifications deployment
    deployment:
      enabled: true
      # Can be either Deployment or DaemonSet
      kind: Deployment
      # Number of pods of the deployment (only applies when kind == Deployment)
      replicas: 3
      # Additional deployment annotations
      annotations: {}
      # Additional deployment labels
      labels: {}
      # Additional pod annotations
      podAnnotations: {}
      # Additional pod labels
      podLabels: {}
      # Additional containers
      additionalContainers: []
      # Additional volumes available for use with initContainers and additionalContainers
      additionalVolumes: []
      # Additional initContainers
      initContainers: []
      # Image name, tag, and pull policy
      image:
        name: bitwarden/notifications
        # Tag of the image to use. (Defaults to general.coreVersion)
        # tag: ""
        pullPolicy: IfNotPresent
    service:
      enabled: true
      # Additional service annotations
      annotations: {}
      # Additional service labels
      labels: {}
      # Service type (Can be ExternalName, ClusterIP, NodePort, or LoadBalancer)
      type: ClusterIP
      # Port exposed by this service
      port: 5000
      # Port to access on the pods targeted by the service
      targetPort: 5000

  # The Portal component
  portal:
    # The Portal deployment
    deployment:
      enabled: true
      # Can be either Deployment or DaemonSet
      kind: Deployment
      # Number of pods of the deployment (only applies when kind == Deployment)
      replicas: 3
      # Additional deployment annotations
      annotations: {}
      # Additional deployment labels
      labels: {}
      # Additional pod annotations
      podAnnotations: {}
      # Additional pod labels
      podLabels: {}
      # Additional containers
      additionalContainers: []
      # Additional volumes available for use with initContainers and additionalContainers
      additionalVolumes: []
      # Additional initContainers
      initContainers: []
      # Image name, tag, and pull policy
      image:
        name: bitwarden/portal
        # Tag of the image to use. (Defaults to general.coreVersion)
        # tag: ""
        pullPolicy: IfNotPresent
    service:
      enabled: true
      # Additional service annotations
      annotations: {}
      # Additional service labels
      labels: {}
      # Service type (Can be ExternalName, ClusterIP, NodePort, or LoadBalancer)
      type: ClusterIP
      # Port exposed by this service
      port: 5000
      # Port to access on the pods targeted by the service
      targetPort: 5000

  # The Proxy component
  proxy:
    # The Proxy deployment
    deployment:
      enabled: true
      # Can be either Deployment or DaemonSet
      kind: Deployment
      # Number of pods of the deployment (only applies when kind == Deployment)
      replicas: 3
      # Additional deployment annotations
      annotations: {}
      # Additional deployment labels
      labels: {}
      # Additional pod annotations
      podAnnotations: {}
      # Additional pod labels
      podLabels: {}
      # Additional containers
      additionalContainers: []
      # Additional volumes available for use with initContainers and additionalContainers
      additionalVolumes: []
      # Additional initContainers
      initContainers: []
      # Image name, tag, and pull policy
      image:
        name: bitwarden/k8s-proxy
        # Tag of the image to use. (Defaults to general.coreVersion)
        # tag: ""
        pullPolicy: IfNotPresent
    service:
      enabled: true
      # Additional service annotations
      annotations: {}
      # Additional service labels
      labels: {}
      # Service type (Can be ExternalName, ClusterIP, NodePort, or LoadBalancer)
      type: ClusterIP
      # Port exposed by this service
      port: 8080
      # Port to access on the pods targeted by the service
      targetPort: 8080

  # The SSO component
  sso:
    # The SSO deployment
    deployment:
      enabled: true
      # Can be either Deployment or DaemonSet
      kind: Deployment
      # Number of pods of the deployment (only applies when kind == Deployment)
      replicas: 3
      # Additional deployment annotations
      annotations: {}
      # Additional deployment labels
      labels: {}
      # Additional pod annotations
      podAnnotations: {}
      # Additional pod labels
      podLabels: {}
      # Additional containers
      additionalContainers: []
      # Additional volumes available for use with initContainers and additionalContainers
      additionalVolumes: []
      # Additional initContainers
      initContainers: []
      # Image name, tag, and pull policy
      image:
        name: bitwarden/sso
        # Tag of the image to use. (Defaults to general.coreVersion)
        # tag: ""
        pullPolicy: IfNotPresent
    service:
      enabled: true
      # Additional service annotations
      annotations: {}
      # Additional service labels
      labels: {}
      # Service type (Can be ExternalName, ClusterIP, NodePort, or LoadBalancer)
      type: ClusterIP
      # Port exposed by this service
      port: 5000
      # Port to access on the pods targeted by the service
      targetPort: 5000

  # The Web component
  web:
    # The Web deployment
    deployment:
      enabled: true
      # Can be either Deployment or DaemonSet
      kind: Deployment
      # Number of pods of the deployment (only applies when kind == Deployment)
      replicas: 3
      # Additional deployment annotations
      annotations: {}
      # Additional deployment labels
      labels: {}
      # Additional pod annotations
      podAnnotations: {}
      # Additional pod labels
      podLabels: {}
      # Additional containers
      additionalContainers: []
      # Additional volumes available for use with initContainers and additionalContainers
      additionalVolumes: []
      # Additional initContainers
      initContainers: []
      # Image name, tag, and pull policy
      image:
        name: bitwarden/web
        # Tag of the image to use. (Defaults to general.webVersion)
        # tag: ""
        pullPolicy: IfNotPresent
    service:
      enabled: true
      # Additional service annotations
      annotations: {}
      # Additional service labels
      labels: {}
      # Service type (Can be ExternalName, ClusterIP, NodePort, or LoadBalancer)
      type: ClusterIP
      # Port exposed by this service
      port: 5000
      # Port to access on the pods targeted by the service
      targetPort: 5000

#
# Configure other volumes
#
volume:
  dataprotection:
    # If specified, existing claim will be used instead of creating a new PVC.
    # existingClaim: ""
    # Additional volume annotations
    annotations: {}
    # Additional volume labels
    labels: {}
    # Access mode
    accessMode: ReadWriteMany
    # Storage class
    storageClass: "efs-sc"
    # Storage size
    size: 1Gi
  licenses:
    # If specified, existing claim will be used instead of creating a new PVC.
    # existingClaim: ""
    # Additional volume annotations
    annotations: {}
    # Additional volume labels
    labels: {}
    # Access mode
    accessMode: ReadWriteMany
    # Storage class
    storageClass: "efs-sc"
    # Storage size
    size: 1Gi
